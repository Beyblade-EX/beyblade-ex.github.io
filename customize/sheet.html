<title>我的陀螺盒⬧My Decks</title>
<script src=/include/common.js></script>
<script defer src=https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js></script>
<link href="/customize/sheet.css" rel=stylesheet>
<nav>
    <menu><li><a></a></li></menu>
    <div>
        <button id="sample">&#xe040; 範例（3 抽 1）</button>
        <label><input id="import" type="file" accept="application/json">&#xe03f; 匯入 JSON</label>
    </div>
    <div>
        <button id="download">&#xe03d; 輸出 PDF</button><input type="number" min="1" max="12" value="2">
        <button id="export">&#xe03e; 輸出 JSON</button>
    </div>
</nav>

<db-status></db-status>
<main>
    <canvas></canvas>
    <form>
        <details>
            <summary>提示</summary>
            <ul class="default">
                <li>右邊是圖層操作，每一圖層只可加入一張圖片</li>
                <li>把旋鈕向上或下拉動以操作</li>
                <li>開啟微調後，旋鈕轉速會變慢。亦可用鍵盤 Ctrl 鍵開關</li>
                <li>雙點擊旋鈕以重設／調節至特殊値</li>
                <li>輸出 JSON 後可作自己的儲存或與他人分享</li>
            </ul>
        </details>
        <p class="message" hidden>按住兩秒以刪除此層<small>無法回復！</small></p>
        <fieldset id="type">
            <button class="type" id="image">&#xe03a;</button>
            <span>&#xe041; 選擇 &#xe042;</span>
            <button class="type" id="color">&#xe043;</button>
        </fieldset>
        <fieldset id="layer">
            <button id="create">&#xe013;</button>
            <button id="delete">&#xe008;</button>
            <div></div>
            <button id="up">&#xe011;</button>
            <button id="down">&#xe012;</button>
        </fieldset>
        <fieldset id="control-image">
            <label>上載<input type="file" accept="image/*" ></label>
            <button popovertarget="picker">圖片庫</button>
        </fieldset>
        <fieldset id="control-color">
            <div>
                <label>線性<input type="radio" name="gradient" value="Linear" checked></label>
                <label>放射<input type="radio" name="gradient" value="Radial"></label>
                <label>錐性<input type="radio" name="gradient" value="Conic"></label>
            </div>
            <label>顏色 1<input type="color" name="color1"></label>
            <label>顏色 2<input type="color" name="color2"></label>
            <label>顏色 3<input type="color" name="color3"></label>
            <spin-knob title="不透明度" range='{"min":0,"max":1,"name":"opacity1","value":1}'></spin-knob>
            <spin-knob title="不透明度" range='{"min":0,"max":1,"name":"opacity2","value":1}'></spin-knob>
            <spin-knob title="不透明度" range='{"min":0,"max":1,"name":"opacity3","value":1}'></spin-knob>
        </fieldset>
        <fieldset id="control">
            <spin-knob title="角度" unit="π" range='{"min":-1,"max":1,"value":0,"name":"angle"}' dblclick="0.5"></spin-knob>
            <spin-knob title="左右" unit="%" range='{"min":-1,"max":1,"value":0,"name":"x"}'></spin-knob>
            <spin-knob title="上下" unit="%" range='{"min":-1,"max":1,"value":0,"name":"y"}'></spin-knob>
            <spin-knob title="縮放" range='{"min":0.1,"max":5,"name":"scale","value":1}'></spin-knob>
            <spin-knob title="伸縮" range='{"min":0.01,"max":2,"name":"pull","value":1}'></spin-knob>
            <spin-knob title="不透明度" range='{"min":0,"max":1,"name":"opacity","value":1}'></spin-knob>
            <label><input type="checkbox" id="fine">微調</label>
        </fieldset>
    </form>
</main>
<aside id="picker" popover>
    <p>若想使用以下圖片，請長按／按右鍵下載，然後重新上載<small>因 CORS 限制，只能手動</small>
</aside>

<script src="/customize/sheet.js"></script>
<script>
    App.picker = () => {
        let show = image => picker.append(E('img', {src: `https://beyblade.takaratomy.co.jp/anime/character/_image/chara${image}`}));
        let picker = Q('[popover]'), 
            main = ['ekusu','bird','multi'], 
            mobu = ['meiko','manju','pan','toguro','kadovar','burn','zonamos','yuni','rex','quinn','shiguru','shieru','kuromu'],
            team = ['persona','zoo','b4','yggdrasil','pakunchanel','cl','pend'];
        main.forEach(c => [1,2,3,4,5,6,7].forEach(i => show(`_${c}_chara0${i}.png`)));
        mobu.forEach(c => show(`_${c}_chara01.png`));
        [...Array(20)].forEach((_, i) => show(`Nav${`${i}`.padStart(2, 0)}.png`));
        team.forEach(t => show(`_team_${t}.png`));
        [...main, ...mobu].forEach(c => show(`_${c}_bgPC.png`))
        main.forEach(c => [1,2,3,4].forEach(i => show(`_${c}_bey0${i}.png`)));
        mobu.forEach(c => [1,2].forEach(i => show(`_${c}_bey0${i}.png`)));
    }
    App();
</script>